{"ast":null,"code":"import axios from \"axios\";\n\nclass ApiClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = \"lifetracker_token\";\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, this.token);\n  }\n\n  async request(_ref) {\n    let {\n      endpoint,\n      method = \"GET\",\n      data = {}\n    } = _ref;\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n    const headers = {\n      \"Accept\": \"application/json, text/plain, /\",\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (this.token) {\n      headers[\"Authorization\"] = `Bearer ${this.token}`;\n    }\n\n    try {\n      const res = await axios({\n        url,\n        method,\n        data,\n        headers\n      });\n      return {\n        data: res.data,\n        error: null\n      };\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response$data$er;\n\n      console.error({\n        errorResponse: err.response\n      });\n      const message = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : (_err$response$data$er = _err$response$data.error) === null || _err$response$data$er === void 0 ? void 0 : _err$response$data$er.message;\n      return {\n        data: null,\n        error: message || String(error)\n      };\n    }\n  }\n\n  async loginUser(credentials) {\n    return await this.request({\n      endpoint: 'auth/login',\n      method: 'POST',\n      data: credentials\n    });\n  }\n\n  async signUpUser(credentials) {\n    return await this.request({\n      endpoint: 'auth/register',\n      method: 'POST',\n      data: credentials\n    });\n  }\n\n  async fetchUserFromToken() {\n    return await this.request({\n      endpoint: \"auth/me\",\n      method: \"GET\"\n    });\n  }\n\n  async logoutUser() {\n    this.setToken(null);\n    localStorage.removeItem(this.tokenName);\n  }\n\n}\n\nexport default new ApiClient(\"http://localhost:3001\");","map":{"version":3,"names":["axios","ApiClient","constructor","remoteHostUrl","token","tokenName","setToken","localStorage","setItem","request","endpoint","method","data","url","headers","res","error","err","console","errorResponse","response","message","String","loginUser","credentials","signUpUser","fetchUserFromToken","logoutUser","removeItem"],"sources":["/Users/deland/Desktop/student_store_pt2_starter/student-store-ui/src/services/ApiClient.js"],"sourcesContent":["import axios from \"axios\";\n\nclass ApiClient {\n    constructor(remoteHostUrl) {\n        this.remoteHostUrl = remoteHostUrl;\n        this.token = null;\n        this.tokenName = \"lifetracker_token\";\n    }\n\n    setToken(token) {\n        this.token = token;\n        localStorage.setItem(this.tokenName, this.token);\n    }\n\n    async request({endpoint, method = \"GET\", data = {}}) {\n        const url = `${this.remoteHostUrl}/${endpoint}`;\n\n        const headers = {\n            \"Accept\":\"application/json, text/plain, /\",\n            \"Content-Type\": \"application/json\"\n        }\n\n\n        if (this.token) {\n            headers[\"Authorization\"] = `Bearer ${this.token}`;\n        }\n\n        try {\n            const res = await axios({url, method, data, headers});\n            return {data: res.data, error: null};\n        }\n        catch (err) {\n            console.error({ errorResponse: err.response });\n            const message = err?.response?.data?.error?.message;\n            return {data: null, error: message || String(error)}\n        }\n    }\n\n    async loginUser(credentials) {\n        return await this.request({endpoint: 'auth/login', method:'POST', data: credentials});\n    }\n\n    async signUpUser(credentials) {\n        return await this.request({endpoint: 'auth/register', method: 'POST', data: credentials});\n    }\n\n    async fetchUserFromToken() {\n        return await this.request({endpoint: \"auth/me\", method:\"GET\" });\n    }\n\n    async logoutUser() {\n        this.setToken(null);\n        localStorage.removeItem(this.tokenName);\n    }\n}\n\nexport default new ApiClient(\"http://localhost:3001\");"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAN,CAAgB;EACZC,WAAW,CAACC,aAAD,EAAgB;IACvB,KAAKA,aAAL,GAAqBA,aAArB;IACA,KAAKC,KAAL,GAAa,IAAb;IACA,KAAKC,SAAL,GAAiB,mBAAjB;EACH;;EAEDC,QAAQ,CAACF,KAAD,EAAQ;IACZ,KAAKA,KAAL,GAAaA,KAAb;IACAG,YAAY,CAACC,OAAb,CAAqB,KAAKH,SAA1B,EAAqC,KAAKD,KAA1C;EACH;;EAEY,MAAPK,OAAO,OAAwC;IAAA,IAAvC;MAACC,QAAD;MAAWC,MAAM,GAAG,KAApB;MAA2BC,IAAI,GAAG;IAAlC,CAAuC;IACjD,MAAMC,GAAG,GAAI,GAAE,KAAKV,aAAc,IAAGO,QAAS,EAA9C;IAEA,MAAMI,OAAO,GAAG;MACZ,UAAS,iCADG;MAEZ,gBAAgB;IAFJ,CAAhB;;IAMA,IAAI,KAAKV,KAAT,EAAgB;MACZU,OAAO,CAAC,eAAD,CAAP,GAA4B,UAAS,KAAKV,KAAM,EAAhD;IACH;;IAED,IAAI;MACA,MAAMW,GAAG,GAAG,MAAMf,KAAK,CAAC;QAACa,GAAD;QAAMF,MAAN;QAAcC,IAAd;QAAoBE;MAApB,CAAD,CAAvB;MACA,OAAO;QAACF,IAAI,EAAEG,GAAG,CAACH,IAAX;QAAiBI,KAAK,EAAE;MAAxB,CAAP;IACH,CAHD,CAIA,OAAOC,GAAP,EAAY;MAAA;;MACRC,OAAO,CAACF,KAAR,CAAc;QAAEG,aAAa,EAAEF,GAAG,CAACG;MAArB,CAAd;MACA,MAAMC,OAAO,GAAGJ,GAAH,aAAGA,GAAH,wCAAGA,GAAG,CAAEG,QAAR,wEAAG,cAAeR,IAAlB,gFAAG,mBAAqBI,KAAxB,0DAAG,sBAA4BK,OAA5C;MACA,OAAO;QAACT,IAAI,EAAE,IAAP;QAAaI,KAAK,EAAEK,OAAO,IAAIC,MAAM,CAACN,KAAD;MAArC,CAAP;IACH;EACJ;;EAEc,MAATO,SAAS,CAACC,WAAD,EAAc;IACzB,OAAO,MAAM,KAAKf,OAAL,CAAa;MAACC,QAAQ,EAAE,YAAX;MAAyBC,MAAM,EAAC,MAAhC;MAAwCC,IAAI,EAAEY;IAA9C,CAAb,CAAb;EACH;;EAEe,MAAVC,UAAU,CAACD,WAAD,EAAc;IAC1B,OAAO,MAAM,KAAKf,OAAL,CAAa;MAACC,QAAQ,EAAE,eAAX;MAA4BC,MAAM,EAAE,MAApC;MAA4CC,IAAI,EAAEY;IAAlD,CAAb,CAAb;EACH;;EAEuB,MAAlBE,kBAAkB,GAAG;IACvB,OAAO,MAAM,KAAKjB,OAAL,CAAa;MAACC,QAAQ,EAAE,SAAX;MAAsBC,MAAM,EAAC;IAA7B,CAAb,CAAb;EACH;;EAEe,MAAVgB,UAAU,GAAG;IACf,KAAKrB,QAAL,CAAc,IAAd;IACAC,YAAY,CAACqB,UAAb,CAAwB,KAAKvB,SAA7B;EACH;;AAnDW;;AAsDhB,eAAe,IAAIJ,SAAJ,CAAc,uBAAd,CAAf"},"metadata":{},"sourceType":"module"}